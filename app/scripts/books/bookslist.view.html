<table class="table table-striped table-hover table-responsive">
  <thead>
    <tr>
      <th ng-repeat="item in fields">{{item.name}}</th>
      <th>actions</th>
    </tr>
  </thead>
  <tbody>
    <tr ng-repeat="book in modelBooks">
      <td ng-repeat="field in fields">
        <a ng-show="$parent.$index != editingIndex" href="" ng-click="edit($parent.$index)">{{book[field.name]}}</a>
        <div ng-show="$parent.$index == editingIndex">
          <input ng-if="field.params.view == 'input'" type="{{field.params.type}}" class="form-control" name="{{field.name}}" placeholder="{{field.placeholder}}" required="{{field.require}}" ng-model="book[field.name]" ng-model-options="{updateOn: 'blur'}">
          <div ng-messages="addBooks[field.name].$error">
            <div ng-message="required">the {{field.name}} is required</div>
          </div>
          <select ng-if="field.params.view == 'select'" ng-options="option for option in field.params.yearList" ng-model="book[field.name]" name="{{field.name}}">
            <option value=''>Choose year</option>
          </select>
        </div>
      </td>
      <td>
        <button ng-show="$index != editingIndex"class="btn btn-danger btn-sm" ng-click="removeBook($index)">remove</button>
        <div ng-show="$index == editingIndex">
          <button class="btn btn-success btn-sm" ng-click="save(book)">save</button>
          <button class="btn btn-danger btn-sm" ng-click="reset($index)">cancel</button>
        </div>
      </td>
    </tr>
  </tbody>

</table>
